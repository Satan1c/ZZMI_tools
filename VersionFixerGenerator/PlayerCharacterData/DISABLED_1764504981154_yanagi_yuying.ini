; Yanagi

; Constants -------------------------

[Constants]
global $active = 0
global $creditinfo = 0

global persist $hair = 1
global persist $glasses = 0
global persist $ear = 0
global persist $shoulder = 1

global persist $chest = 1
global persist $collar = 1
global persist $tie = 0

global persist $arms = 0

global persist $legs = 0
global persist $tights = 1

global persist $skin = 0
global persist $face = 5

[KeySwapHair]
key = ctrl no_shift vk_up
condition = $active == 1
type = cycle
$hair = 0,1

[KeySwapGlasses]
key = no_ctrl shift vk_up
condition = $active == 1
type = cycle
$glasses = 0,1,2

[KeySwapEarpiece]
key = no_ctrl no_shift vk_up
condition = $active == 1
type = cycle
$ear = 0,1

[KeySwapShoulder]
key = ctrl no_shift vk_right
condition = $active == 1
type = cycle
$shoulder = 0,1


[KeySwapChest]
key = ctrl no_shift vk_left
condition = $active == 1
type = cycle
$chest = 0,1

[KeySwapCollar]
key = no_ctrl shift vk_left
condition = $active == 1
type = cycle
$collar = 0,1

[KeySwapTie]
key = no_ctrl no_shift vk_left
condition = $active == 1
type = cycle
$tie = 0,1


[KeySwapArms]
key = no_ctrl no_shift vk_right
condition = $active == 1
type = cycle
$arms = 0,1


[KeySwapLegs]
key = ctrl no_shift vk_down
condition = $active == 1
type = cycle
$legs = 0,1

[KeySwapTights]
key = no_ctrl no_shift vk_down
condition = $active == 1
type = cycle
$tights = 0,1


[KeySwapSkin]
key = shift .
condition = $active == 1
type = cycle
$skin = 0,1

[KeySwapFace]
key = no_shift .
condition = $active == 1
type = cycle
$face = 0,1,2,3,4,5

[Present]
post $active = 0
run = CommandListCreditInfo

; Overrides -------------------------

[TextureOverrideYanagiHairBlend]
hash = 0bbe1d7d
handling = skip
vb2 = ResourceYanagiHairBlend
if DRAW_TYPE == 1
	vb0 = ResourceYanagiHairPosition
	draw = 12315, 0

	$active = 1
endif

[TextureOverrideYanagiHairTexcoord]
hash = 42ca0c9b
vb1 = ResourceYanagiHairTexcoord

[TextureOverrideYanagiHairVertexLimitRaise]
hash = daba2b23
override_vertex_count = 12315
override_byte_stride = 40

[TextureOverrideYanagiRingBlend]
hash = 07a1d434
handling = skip
vb2 = ResourceYanagiRingBlend
if DRAW_TYPE == 1
	vb0 = ResourceYanagiRingPosition
	draw = 284, 0

	$active = 1
endif

[TextureOverrideYanagiRingTexcoord]
hash = 49188dc8
vb1 = ResourceYanagiRingTexcoord

[TextureOverrideYanagiRingVertexLimitRaise]
hash = 01864eed
override_vertex_count = 284
override_byte_stride = 40

[TextureOverrideYanagiGlassBlend]
hash = 6b5d6e39
handling = skip
vb2 = ResourceYanagiGlassBlend
if DRAW_TYPE == 1
	vb0 = ResourceYanagiGlassPosition
	draw = 136, 0

	$active = 1
endif

[TextureOverrideYanagiGlassTexcoord]
hash = dd32963a
vb1 = ResourceYanagiGlassTexcoord

[TextureOverrideYanagiGlassVertexLimitRaise]
hash = 178a1ff8
override_vertex_count = 136
override_byte_stride = 40

[TextureOverrideYanagiHairIB]
hash = 9e12899f
handling = skip

[TextureOverrideYanagiHairA]
hash = 9e12899f
match_first_index = 0
ib = ResourceYanagiHairAIB
	if $skin == 0 && $glasses == 0
		Resource\ZZMI\Diffuse = ref ResourceYanagiHairADiffuseWarm
	elif $skin == 0 && $glasses == 1
		Resource\ZZMI\Diffuse = ref ResourceYanagiHairADiffuseWarmRed
	elif $skin == 0 && $glasses == 2
		Resource\ZZMI\Diffuse = ref ResourceYanagiHairADiffuseWarm
	elif $skin == 1 && $glasses == 0
		Resource\ZZMI\Diffuse = ref ResourceYanagiHairADiffuseWarmer
	elif $skin == 1 && $glasses == 1
		Resource\ZZMI\Diffuse = ref ResourceYanagiHairADiffuseWarmerRed
	elif $skin == 1 && $glasses == 2
		Resource\ZZMI\Diffuse = ref ResourceYanagiHairADiffuseWarmer
	endif
Resource\ZZMI\NormalMap = ref ResourceYanagiHairANormalMap
Resource\ZZMI\LightMap = ref ResourceYanagiHairALightMap
Resource\ZZMI\MaterialMap = ref ResourceYanagiHairAMaterialMap
Resource\ZZMI\GlowMap = ref ResourceYanagiHairAGlowMap
run = CommandList\ZZMI\SetTextures
; Bangs (1078)
drawindexed = 3204, 0, 0
	if $ear == 0
		; Earpiece (576)
		drawindexed = 1482, 3204, 0
	endif
	if $ear == 0 && $collar == 0
		; EarpieceCord (96)
		drawindexed = 264, 4686, 0
	elif $ear == 0 && $collar == 1
		; EarpieceCordAlt (96)
		drawindexed = 264, 4950, 0
	endif
; Earrings (276)
drawindexed = 456, 5214, 0
	if $hair == 1
		; EveBow (370)
		drawindexed = 1266, 5670, 0
	endif
	if $hair == 1
		; EveBun (771)
		drawindexed = 3660, 6936, 0
		; EveHair (1052)
		drawindexed = 4800, 10596, 0
	endif
	if $glasses == 0 || $glasses == 1
		; Glasses (434)
		drawindexed = 1020, 15396, 0
	endif
; Hands (1562)
drawindexed = 7416, 16416, 0
	if $hair == 0 
		; NagiHair (1541)
		drawindexed = 5157, 23832, 0
	endif
	if $hair == 0
		; NagiRibbon (902)
		drawindexed = 2316, 28989, 0
	endif
; Neck (287)
drawindexed = 1128, 31305, 0
	if $shoulder == 0
		; Shoulder (3274)
		drawindexed = 7230, 32433, 0
	endif

[TextureOverrideYanagiGlassIB]
hash = 44d9123b
handling = skip

[TextureOverrideYanagiGlassA]
hash = 44d9123b
match_first_index = 0
Resource\ZZMI\NormalMap = ref ResourceYanagiHairANormalMap
Resource\ZZMI\LightMap = ref ResourceYanagiHairALightMap
Resource\ZZMI\MaterialMap = ref ResourceYanagiHairAMaterialMap
run = CommandList\ZZMI\SetTextures
ib = ResourceYanagiGlassAIB
	if $glasses == 0 || $glasses == 1
		; GlassA (136)
		drawindexed = 372, 0, 0
	endif

[TextureOverrideYanagiRingIB]
hash = 13c75775
handling = skip

[TextureOverrideYanagiRingA]
hash = 13c75775
match_first_index = 0
ib = ResourceYanagiRingAIB
run = CommandList\ZZMI\SetTextures
	if $hair == 0
		; NagiRing (284)
		drawindexed = 840, 0, 0
	endif

[TextureOverrideYanagiBodyBlend]
hash = fd363c76
handling = skip
vb2 = ResourceYanagiBodyBlend
if DRAW_TYPE == 1
	vb0 = ResourceYanagiBodyPosition
	draw = 16640, 0

	$active = 1
endif

[TextureOverrideYanagiBodyTexcoord]
hash = f4fbc5c0
vb1 = ResourceYanagiBodyTexcoord

[TextureOverrideYanagiBodyVertexLimitRaise]
hash = 2fe26340
override_vertex_count = 16640
override_byte_stride = 40

[TextureOverrideYanagiBodyIB]
hash = f478ee4c
handling = skip

[TextureOverrideYanagiBodyA]
hash = f478ee4c
match_first_index = 0
ib = ResourceYanagiBodyAIB
	if $skin == 0 && $tights == 0
		Resource\ZZMI\Diffuse = ref ResourceYanagiBodyADiffuseWarm
	elif $skin == 0 && $tights == 1
		Resource\ZZMI\Diffuse = ref ResourceYanagiBodyADiffuseWarmTights
	elif $skin == 1 && $tights == 0
		Resource\ZZMI\Diffuse = ref ResourceYanagiBodyADiffuseWarmer
	elif $skin == 1 && $tights == 1
		Resource\ZZMI\Diffuse = ref ResourceYanagiBodyADiffuseWarmerTights
	endif
	if $tights == 0
		Resource\ZZMI\LightMap = ref ResourceYanagiBodyALightMap
	else if $tights == 1		
		Resource\ZZMI\LightMap = ref ResourceYanagiBodyALightMapTights
	endif
Resource\ZZMI\NormalMap = ref ResourceYanagiBodyANormalMap
Resource\ZZMI\MaterialMap = ref ResourceYanagiBodyAMaterialMap
run = CommandList\ZZMI\SetTextures
	if $arms == 1
		; Arms (1558)
		drawindexed = 5796, 0, 0
	endif
	if $chest == 1
		; Chest (453)
		drawindexed = 2316, 5796, 0
	elif $chest == 0
		; ChestOG (453)
		drawindexed = 2316, 8112, 0
	endif
	if $collar == 0
		; Collar (208)
		drawindexed = 612, 10428, 0
	endif
; Corset (3250)
drawindexed = 7473, 11040, 0
	if $legs == 1
		; Pants (3890)
		drawindexed = 16464, 18513, 0
	elif $legs == 0
		; Skirt (4120)
		drawindexed = 15486, 34977, 0
	endif
	if $arms == 0
		; Sleeves (1996)
		drawindexed = 6966, 50463, 0
	endif
	if $tie == 0 && $chest == 1
		; Tie (266)
		drawindexed = 636, 57429, 0
	endif
	if $collar == 1
		; Tie Base (184)
		drawindexed = 540, 58065, 0
	endif
	if $tie == 0 && $chest == 0
		; TieOG (262)
		drawindexed = 636, 58605, 0
	endif

[TextureOverrideYanagiFaceAIB]
hash = 0817204c
run = CommandListSkinTexture
	
[TextureOverrideYanagiFaceADiffuse]
hash = 95d9e92e
	if $skin == 0 && $face == 0
		this = ResourceYanagiFaceADiffuseWarm
	elif $skin == 0 && $face == 1
		this = ResourceYanagiFaceADiffuseWarmPurp
	elif $skin == 0 && $face == 2
		this = ResourceYanagiFaceADiffuseWarmGreen
	elif $skin == 0 && $face == 3
		this = ResourceYanagiFaceADiffuseWarmLash
	elif $skin == 0 && $face == 4
		this = ResourceYanagiFaceADiffuseWarmLashPurp
	elif $skin == 0 && $face == 5
		this = ResourceYanagiFaceADiffuseWarmLashGreen
	elif $skin == 1 && $face == 0
		this = ResourceYanagiFaceADiffuseWarmer
	elif $skin == 1 && $face == 1
		this = ResourceYanagiFaceADiffuseWarmerPurp
	elif $skin == 1 && $face == 2
		this = ResourceYanagiFaceADiffuseWarmerGreen
	elif $skin == 1 && $face == 3
		this = ResourceYanagiFaceADiffuseWarmerLash
	elif $skin == 1 && $face == 4
		this = ResourceYanagiFaceADiffuseWarmerLashPurp
	elif $skin == 1 && $face == 5
		this = ResourceYanagiFaceADiffuseWarmerLashGreen		
	endif
	
; CommandList -----------------------

[CommandListCreditInfo]
if $creditinfo == 0 && $active > 0
	pre Resource\ShaderFixes\help.ini\Notification = ResourceCreditInfo
	pre run = CustomShader\ShaderFixes\help.ini\FormatText
	pre $\ShaderFixes\help.ini\notification_timeout = time + 5.0
	$creditinfo = 1
endif

; Resources -------------------------

[ResourceYanagiHairPosition]
type = Buffer
stride = 40
filename = .\Meshes\YanagiHairPosition.buf

[ResourceYanagiHairBlend]
type = Buffer
stride = 32
filename = .\Meshes\YanagiHairBlend.buf

[ResourceYanagiHairTexcoord]
type = Buffer
stride = 24
filename = .\Meshes\YanagiHairTexcoord.buf

[ResourceYanagiHairAIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\Meshes\YanagiHairA.ib

[ResourceYanagiGlassPosition]
type = Buffer
stride = 40
filename = .\Meshes\YanagiGlassPosition.buf

[ResourceYanagiGlassBlend]
type = Buffer
stride = 8
filename = .\Meshes\YanagiGlassBlend.buf

[ResourceYanagiGlassTexcoord]
type = Buffer
stride = 28
filename = .\Meshes\YanagiGlassTexcoord.buf

[ResourceYanagiGlassAIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\Meshes\YanagiGlassA.ib

[ResourceYanagiRingPosition]
type = Buffer
stride = 40
filename = .\Meshes\YanagiRingPosition.buf

[ResourceYanagiRingBlend]
type = Buffer
stride = 8
filename = .\Meshes\YanagiRingBlend.buf

[ResourceYanagiRingTexcoord]
type = Buffer
stride = 28
filename = .\Meshes\YanagiRingTexcoord.buf

[ResourceYanagiRingAIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\Meshes\YanagiRingA.ib


[ResourceYanagiBodyPosition]
type = Buffer
stride = 40
filename = .\Meshes\YanagiBodyPosition.buf

[ResourceYanagiBodyBlend]
type = Buffer
stride = 32
filename = .\Meshes\YanagiBodyBlend.buf

[ResourceYanagiBodyTexcoord]
type = Buffer
stride = 20
filename = .\Meshes\YanagiBodyTexcoord.buf

[ResourceYanagiBodyAIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\Meshes\YanagiBodyA.ib


[ResourceYanagiHairADiffuseWarm]
filename = .\Warm\YanagiHairADiffuse.dds

[ResourceYanagiHairADiffuseWarmRed]
filename = .\Warm\YanagiHairADiffuseRed.dds

[ResourceYanagiHairADiffuseWarmer]
filename = .\Warmer\YanagiHairADiffuse.dds

[ResourceYanagiHairADiffuseWarmerRed]
filename = .\Warmer\YanagiHairADiffuseRed.dds

[ResourceYanagiHairANormalMap]
filename = .\Mats\YanagiHairANormalMap.dds

[ResourceYanagiHairALightMap]
filename = .\Mats\YanagiHairALightMap.dds

[ResourceYanagiHairAMaterialMap]
filename = .\Mats\YanagiHairAMaterialMap.dds

[ResourceYanagiHairAGlowMap]
filename = .\Mats\YanagiHairAGlowMap.dds


[ResourceYanagiBodyADiffuseWarm]
filename = .\Warm\YanagiBodyADiffuse.dds

[ResourceYanagiBodyADiffuseWarmTights]
filename = .\Warm\YanagiBodyADiffuseTights.dds

[ResourceYanagiBodyADiffuseWarmer]
filename = .\Warmer\YanagiBodyADiffuse.dds

[ResourceYanagiBodyADiffuseWarmerTights]
filename = .\Warmer\YanagiBodyADiffuseTights.dds

[ResourceYanagiBodyANormalMap]
filename = .\Mats\YanagiBodyANormalMap.dds

[ResourceYanagiBodyALightMap]
filename = .\Mats\YanagiBodyALightMap.dds

[ResourceYanagiBodyALightMapTights]
filename = .\Mats\YanagiBodyALightMapTights.dds

[ResourceYanagiBodyAMaterialMap]
filename = .\Mats\YanagiBodyAMaterialMap.dds


[ResourceYanagiFaceADiffuseWarm]
filename = .\Warm\LashDef\YanagiFaceADiffuse.dds

[ResourceYanagiFaceADiffuseWarmPurp]
filename = .\Warm\LashDef\YanagiFaceADiffusePurp.dds

[ResourceYanagiFaceADiffuseWarmGreen]
filename = .\Warm\LashDef\YanagiFaceADiffuseGreen.dds

[ResourceYanagiFaceADiffuseWarmLash]
filename = .\Warm\LashCol\YanagiFaceADiffuse.dds

[ResourceYanagiFaceADiffuseWarmLashPurp]
filename = .\Warm\LashCol\YanagiFaceADiffusePurp.dds

[ResourceYanagiFaceADiffuseWarmLashGreen]
filename = .\Warm\LashCol\YanagiFaceADiffuseGreen.dds


[ResourceYanagiFaceADiffuseWarmer]
filename = .\Warmer\LashDef\YanagiFaceADiffuse.dds

[ResourceYanagiFaceADiffuseWarmerPurp]
filename = .\Warmer\LashDef\YanagiFaceADiffusePurp.dds

[ResourceYanagiFaceADiffuseWarmerGreen]
filename = .\Warmer\LashDef\YanagiFaceADiffuseGreen.dds

[ResourceYanagiFaceADiffuseWarmerLash]
filename = .\Warmer\LashCol\YanagiFaceADiffuse.dds

[ResourceYanagiFaceADiffuseWarmerLashPurp]
filename = .\Warmer\LashCol\YanagiFaceADiffusePurp.dds

[ResourceYanagiFaceADiffuseWarmerLashGreen]
filename = .\Warmer\LashCol\YanagiFaceADiffuseGreen.dds


[ResourceCreditInfo]
type = Buffer
data = "Created by dcNumber8"

; .ini generated by XXMI (XX-Model-Importer) v1.5.4
; If you have any issues or find any bugs, please open a ticket at https://github.com/leotorrez/XXMI-Tools/issues
